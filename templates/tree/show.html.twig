{% extends 'base.html.twig' %}

{% block title %}Tree{% endblock %}

{% block body %}
<section class="py-5">
    <div class="container">
        <div class="row g-3">
            <div class="col-md-4 col-lg-3">
                {% include "tree/_search_form.html.twig" %}
                <span class="text-secondary">{{ members_count }} membres trouv√©s</span>
            </div>

            <div class="col">
                <div class="bg-body rounded border shadow-sm">
                    {% for letter, members in grouped_members %}
                        <section>
                            <div class="px-4 py-1 fw-bold border-bottom mb-2">{{ letter }}</div>
                            <div class="mb-3">
                                {% for member in members %}
                                    <div class="tree-member-item px-4 py-1">
                                        <div class="row">
                                            <div class="col">
                                                {{ member.lastname | upper }} {{ member.firstname }}
                                            </div>
                                            <div class="col-auto">
                                                <div class="row g-2">
                                                    <div class="col-auto">
                                                        <a 
                                                            href="{{ path('app_person_edit', {treeId: tree.id, id: member.id}) }}" 
                                                            class="link-icon"
                                                        >
                                                            <i class="fa-solid fa-edit"></i>
                                                        </a>
                                                    </div>
                                                    <div class="col-auto">
                                                        {{ include('person/_delete_form.html.twig', { person: member }) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </section>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
